
  <!-- Top Navbar -->
  <nav class="navbar navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="/admin">Admin</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNav" aria-controls="offcanvasNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <span class="text-light ms-auto" id="currentDate"></span>
    </div>
  </nav>

  <!-- Offcanvas Menu for Mobile -->
  <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNav" aria-labelledby="offcanvasNavLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvasNavLabel">Admin Panel</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="/admin">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Users</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Votes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Transactions</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/contestants">contestants</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/contestants/standings">standings</a>
        </li>
      </ul>
    </div>
  </div>

  <!-- Admin Panel Content -->
  <div class="container-fluid p-4">
    <div class="row">
      <!-- Total Users Card -->
      <div class="col-md-4 col-lg-2 mb-4">
        <div class="card text-white bg-primary">
          <div class="card-body">
            <h5 class="card-title">Total Users</h5>
            <p class="card-text" id="totalUsers"><%=allUsersResult.length%></p>
          </div>
        </div>
      </div>

      <!-- Total Contestants Card -->
      <div class="col-md-4 col-lg-2 mb-4">
        <div class="card text-white bg-success">
          <div class="card-body">
            <h5 class="card-title">Total Contestants</h5>
            <p class="card-text" id="totalContestants"><%=allContendersResult.length%></p>
          </div>
        </div>
      </div>

      <!-- Total Amount Earned Card -->
      <div class="col-md-4 col-lg-2 mb-4">
        <div class="card text-white bg-info">
          <div class="card-body">
            <h5 class="card-title">Total Amount Earned</h5>
            <p class="card-text" id="totalAmount">₦ <%=formatedsuccesfulTransactionAmount%></p>
          </div>
        </div>
      </div>

      <!-- Total Failed Transactions Card -->
      <div class="col-md-4 col-lg-2 mb-4">
        <div class="card text-white bg-danger">
          <div class="card-body">
            <h5 class="card-title">Total Failed Transactions</h5>
            <p class="card-text" id="totalFailedTransactions"><%=failedTransactionTotalResult.length%></p>
          </div>
        </div>
      </div>

      <!-- Total Amount Owed Card -->
      <div class="col-md-4 col-lg-2 mb-4">
        <div class="card text-white bg-danger">
          <div class="card-body">
            <h5 class="card-title">Total Amount Owed</h5>
            <p class="card-text" id="totalFailedTransactions">₦ <%=formatedfailedTransactionAmount%></p>
          </div>
        </div>
      </div>

      <!-- Total Votes Cast Card -->
      <div class="col-md-4 col-lg-2 mb-4">
        <div class="card text-white bg-warning">
          <div class="card-body">
            <h5 class="card-title">Total Votes Casted</h5>
            <p class="card-text" id="totalVotes"><%=formatedallVotesAmount%></p>
          </div>
        </div>
      </div>
    </div>

    <!-- Table Section for Users that Voted -->
    <div class="row">
      <div class="col-md-6 mt-2">
        <div class="card">
          <div class="card-header bg-dark text-white">
            <h5 class="card-title">Contestants </h5>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-striped" id="dataTable" width="100%" cellspacing="0">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Total Vote</th>
                    <th>Total Points</th>
                  </tr>
                </thead>
                <tbody>
                  <% allContendersResult.forEach(function(data) { %>
                    <tr>
                      <td><%= data['fname'] %> <%= data['lname'] %></td>
                      <td><%= data['vote_count'] %></td>
                      <td><%= data['points'] %></td>
                    </tr>
                  <% }) %>
                </tbody>
              </table>
              
          </div>
          </div>
        </div>
      </div>

      <div class="col-md-6 mt-2">
        <div class="card">
          <div class="card-header bg-dark text-white">
            <h5 class="card-title">Users Who Voted</h5>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-striped" id="dataTable" width="100%" cellspacing="0">
                <thead>
                  <tr>
                    <th>Email</th>
                    <th>Total Votes</th>
                    <th>Total Amount Paid (₦)</th>
                  </tr>
                </thead>
                <tbody>
                  <% userTransactions.forEach(function(user) { %>
                    <tr>
                      <td><%= user.email %></td>
                      <td><%= user.total_votes %></td>
                      <td>₦ <%= user.total_amount_paid %></td>
                    </tr>
                  <% }) %>
                </tbody>
              </table>
          </div>
          </div>
        </div>
      </div>
      
      <div class="col-md-6 mt-2">
        <div class="card">
          <div class="card-header bg-dark text-white">
            <h5 class="card-title">Users</h5>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-striped" id="dataTable" width="100%" cellspacing="0">
                  <thead>
                      <tr>
                        <th>Name </th>
                        <th>Total Vote </th>
                      </tr>
                  </thead>
              
                  <tbody>
                
                      <% allUsersResult.forEach(function(data) {%>

                          <tr>
                              <td><%= data['email'] %> </td>
                              <td><%= data['vote_count'] %></td>
                         </tr> 
                         
                             <% }) %>
                      </tbody>
              </table>
          </div>
          </div>
        </div>
      </div>
    </div>


  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Display current date
    document.getElementById('currentDate').innerText = new Date().toLocaleDateString();
  </script>
